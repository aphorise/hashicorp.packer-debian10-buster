{
"variables": { "debian_version": "10.2.0" },
"builders":
[{
	"name": "vbox-debian-10",
	"type": "virtualbox-iso",
	"vm_name": "debian-{{user `debian_version`}}-amd64",		
	"guest_os_type": "Debian_64",
	"guest_additions_mode": "upload",
	"headless": true,
	"http_directory": "ui-input.http",
	"vboxmanage":
	[
		["modifyvm", "{{.Name}}", "--memory", "2048"],
		["modifyvm", "{{.Name}}", "--cpus", "2"],
		["modifyvm", "{{.Name}}", "--vram", "32"],
		["modifyvm", "{{.Name}}", "--nictype1", "virtio"],
		["modifyvm", "{{.Name}}", "--nictype2", "virtio"],
		["modifyvm", "{{.Name}}", "--nictype3", "virtio"],
		["modifyvm", "{{.Name}}", "--nictype4", "virtio"]
	],
	"virtualbox_version_file": ".vbox_version",
	"disk_size": 32768,
	"hard_drive_interface": "sata",
	"hard_drive_discard": true,
	"iso_checksum_type": "sha512",
	"iso_checksum_url": "https://cdimage.debian.org/cdimage/release/{{user `debian_version`}}/amd64/iso-cd/SHA512SUMS",
	"iso_url": "https://cdimage.debian.org/cdimage/release/{{user `debian_version`}}/amd64/iso-cd/debian-{{user `debian_version`}}-amd64-netinst.iso",
	"ssh_username": "vagrant",
	"ssh_password": "vagrant",
	"ssh_wait_timeout": "60m",
	"ssh_port": 22,
	"boot_wait": "5s",
	"boot_command":
	[
		"<tab>",
		"<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
		"<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
		"<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
		"<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
		"<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
		"<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
		"<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
		"<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
		"/install.amd/vmlinuz initrd=/install.amd/initrd.gz",
		" auto=true",
		" url={{.HTTPIP}}:{{.HTTPPort}}/pressed_debian10-buster.cfg",
		" hostname=vagrant",
		" domain=home",
		" net.ifnames=0",
		" BOOT_DEBUG=2",
		" DEBCONF_DEBUG=5",
		"<enter>"
	],
	"shutdown_command": "echo vagrant | sudo -S poweroff",
	"post_shutdown_delay": "2m"
}],
"post-processors":
[{
	"type": "vagrant",
	"output": "debian-{{user `debian_version`}}-amd64_{{.Provider}}.box",
	"compression_level": "9",
	"only": ["vbox-debian-10"]
}],
"provisioners":
[{
	"type": "shell",
	"execute_command": "echo 'vagrant' | {{.Vars}} sudo -E -S bash '{{.Path}}'",
	"scripts":
	[
		"os-scripts.ud/1.sshd.sh",
		"os-scripts.ud/2.sudoers.sh",
		"os-scripts.ud/3.install_cli_tools.sh",
		"os-scripts.ud/4.vagrant.sh",
		"os-scripts.ud/5.vbaddguest.sh",
		"os-scripts.ud/6.cleanup.sh"
	],
	"only": ["vbox-debian-10"]
}]
}